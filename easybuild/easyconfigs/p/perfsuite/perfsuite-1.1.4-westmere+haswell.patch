diff '--exclude=*~' '--exclude=*cache*' '--exclude=*in' -urN perfsuite-1.1.4/papi_wmere.xml perfsuite-1.1.4-tom/papi_wmere.xml
--- perfsuite-1.1.4/papi_wmere.xml	1970-01-01 01:00:00.000000000 +0100
+++ perfsuite-1.1.4-tom/papi_wmere.xml	2015-04-27 15:14:50.589435385 +0200
@@ -0,0 +1,125 @@
+<?xml version="1.0" encoding="UTF-8" ?>
+<ps_hwpc_eventlist class="PAPI">
+<!-- Generated by PerfSuite psinv at Mon Apr 27 15:14:50 2015 on lynx -->
+
+	<!-- ========================================= -->
+	<!-- Each event is preceded by its description -->
+	<!-- ========================================= -->
+
+	<!-- Conditional branch instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_CN" />
+	<!-- Branch instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_INS" />
+	<!-- Conditional branch instructions mispredicted -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_MSP" />
+	<!-- Conditional branch instructions not taken -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_NTK" />
+	<!-- Conditional branch instructions correctly predicted -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_PRC" />
+	<!-- Conditional branch instructions taken -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_TKN" />
+	<!-- Unconditional branch instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_UCN" />
+	<!-- Floating point operations; optimized to count scaled double precision vector operations -->
+	<ps_hwpc_event type="preset" name="PAPI_DP_OPS" />
+	<!-- Floating point instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_FP_INS" />
+	<!-- Floating point operations -->
+	<ps_hwpc_event type="preset" name="PAPI_FP_OPS" />
+	<!-- Level 1 data cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_DCM" />
+	<!-- Level 1 instruction cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_ICA" />
+	<!-- Level 1 instruction cache hits -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_ICH" />
+	<!-- Level 1 instruction cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_ICM" />
+	<!-- Level 1 instruction cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_ICR" />
+	<!-- Level 1 load misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_LDM" />
+	<!-- Level 1 store misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_STM" />
+	<!-- Level 1 cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_TCM" />
+	<!-- Level 2 data cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_DCA" />
+	<!-- Level 2 data cache hits -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_DCH" />
+	<!-- Level 2 data cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_DCM" />
+	<!-- Level 2 data cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_DCR" />
+	<!-- Level 2 data cache writes -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_DCW" />
+	<!-- Level 2 instruction cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_ICA" />
+	<!-- Level 2 instruction cache hits -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_ICH" />
+	<!-- Level 2 instruction cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_ICM" />
+	<!-- Level 2 instruction cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_ICR" />
+	<!-- Level 2 load misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_LDM" />
+	<!-- Level 2 store misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_STM" />
+	<!-- Level 2 total cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_TCA" />
+	<!-- Level 2 total cache hits -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_TCH" />
+	<!-- Level 2 cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_TCM" />
+	<!-- Level 2 total cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_TCR" />
+	<!-- Level 2 total cache writes -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_TCW" />
+	<!-- Level 3 data cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_DCA" />
+	<!-- Level 3 data cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_DCR" />
+	<!-- Level 3 data cache writes -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_DCW" />
+	<!-- Level 3 instruction cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_ICA" />
+	<!-- Level 3 instruction cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_ICR" />
+	<!-- Level 3 load misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_LDM" />
+	<!-- Level 3 total cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_TCA" />
+	<!-- Level 3 cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_TCM" />
+	<!-- Level 3 total cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_TCR" />
+	<!-- Level 3 total cache writes -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_TCW" />
+	<!-- Load instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_LD_INS" />
+	<!-- Load/store instructions completed -->
+	<ps_hwpc_event type="preset" name="PAPI_LST_INS" />
+	<!-- Reference clock cycles -->
+	<ps_hwpc_event type="preset" name="PAPI_REF_CYC" />
+	<!-- Cycles stalled on any resource -->
+	<ps_hwpc_event type="preset" name="PAPI_RES_STL" />
+	<!-- Floating point operations; optimized to count scaled single precision vector operations -->
+	<ps_hwpc_event type="preset" name="PAPI_SP_OPS" />
+	<!-- Store instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_SR_INS" />
+	<!-- Data translation lookaside buffer misses -->
+	<ps_hwpc_event type="preset" name="PAPI_TLB_DM" />
+	<!-- Instruction translation lookaside buffer misses -->
+	<ps_hwpc_event type="preset" name="PAPI_TLB_IM" />
+	<!-- Total translation lookaside buffer misses -->
+	<ps_hwpc_event type="preset" name="PAPI_TLB_TL" />
+	<!-- Total cycles -->
+	<ps_hwpc_event type="preset" name="PAPI_TOT_CYC" />
+	<!-- Instructions issued -->
+	<ps_hwpc_event type="preset" name="PAPI_TOT_IIS" />
+	<!-- Instructions completed -->
+	<ps_hwpc_event type="preset" name="PAPI_TOT_INS" />
+	<!-- Double precision vector/SIMD instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_VEC_DP" />
+	<!-- Single precision vector/SIMD instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_VEC_SP" />
+</ps_hwpc_eventlist>
Binary files perfsuite-1.1.4/src/javalib/perfsuite/psjavadoc.tar and perfsuite-1.1.4-tom/src/javalib/perfsuite/psjavadoc.tar differ
diff '--exclude=*~' '--exclude=*cache*' '--exclude=*in' -urN perfsuite-1.1.4/src/libpshwpc/arch-defaults/Makefile.am perfsuite-1.1.4-tom/src/libpshwpc/arch-defaults/Makefile.am
--- perfsuite-1.1.4/src/libpshwpc/arch-defaults/Makefile.am	2012-05-07 22:01:01.000000000 +0200
+++ perfsuite-1.1.4-tom/src/libpshwpc/arch-defaults/Makefile.am	2015-04-27 15:25:55.104725774 +0200
@@ -22,6 +22,7 @@
                                 papi3_nhm.xml \
                                 papi3_wsm.xml \
                                 papi_sandybridge.xml \
+                                papi_haswell.xml \
 				papi3_p2.xml \
 				papi3_p6.xml \
 				papi3_core.xml \
diff '--exclude=*~' '--exclude=*cache*' '--exclude=*in' -urN perfsuite-1.1.4/src/libpshwpc/arch-defaults/papi3_wsm.xml perfsuite-1.1.4-tom/src/libpshwpc/arch-defaults/papi3_wsm.xml
--- perfsuite-1.1.4/src/libpshwpc/arch-defaults/papi3_wsm.xml	2011-10-08 00:08:10.000000000 +0200
+++ perfsuite-1.1.4-tom/src/libpshwpc/arch-defaults/papi3_wsm.xml	2015-04-11 22:37:58.456360116 +0200
@@ -29,5 +29,7 @@
   <ps_hwpc_event type="preset" name="PAPI_TOT_CYC" />
   <ps_hwpc_event type="preset" name="PAPI_TOT_IIS" />
   <ps_hwpc_event type="preset" name="PAPI_TOT_INS" />
+  <ps_hwpc_event type="preset" name="PAPI_VEC_SP" />
+  <ps_hwpc_event type="preset" name="PAPI_VEC_DP" />
 </ps_hwpc_eventlist>
 
diff '--exclude=*~' '--exclude=*cache*' '--exclude=*in' -urN perfsuite-1.1.4/src/libpshwpc/arch-defaults/papi_haswell.xml perfsuite-1.1.4-tom/src/libpshwpc/arch-defaults/papi_haswell.xml
--- perfsuite-1.1.4/src/libpshwpc/arch-defaults/papi_haswell.xml	1970-01-01 01:00:00.000000000 +0100
+++ perfsuite-1.1.4-tom/src/libpshwpc/arch-defaults/papi_haswell.xml	2015-04-27 15:17:27.972299472 +0200
@@ -0,0 +1,121 @@
+<?xml version="1.0" encoding="UTF-8" ?>
+<ps_hwpc_eventlist class="PAPI">
+<!-- Generated by PerfSuite psinv at Mon Apr 27 15:17:27 2015 on wt-1-01 -->
+
+	<!-- ========================================= -->
+	<!-- Each event is preceded by its description -->
+	<!-- ========================================= -->
+
+	<!-- Conditional branch instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_CN" />
+	<!-- Branch instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_INS" />
+	<!-- Conditional branch instructions mispredicted -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_MSP" />
+	<!-- Conditional branch instructions not taken -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_NTK" />
+	<!-- Conditional branch instructions correctly predicted -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_PRC" />
+	<!-- Conditional branch instructions taken -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_TKN" />
+	<!-- Unconditional branch instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_BR_UCN" />
+	<!-- Requests for exclusive access to clean cache line -->
+	<ps_hwpc_event type="preset" name="PAPI_CA_CLN" />
+	<!-- Requests for cache line invalidation -->
+	<ps_hwpc_event type="preset" name="PAPI_CA_INV" />
+	<!-- Requests for cache line intervention -->
+	<ps_hwpc_event type="preset" name="PAPI_CA_ITV" />
+	<!-- Requests for exclusive access to shared cache line -->
+	<ps_hwpc_event type="preset" name="PAPI_CA_SHR" />
+	<!-- Requests for a snoop -->
+	<ps_hwpc_event type="preset" name="PAPI_CA_SNP" />
+	<!-- Cycles with maximum instructions completed -->
+	<ps_hwpc_event type="preset" name="PAPI_FUL_CCY" />
+	<!-- Cycles with maximum instruction issue -->
+	<ps_hwpc_event type="preset" name="PAPI_FUL_ICY" />
+	<!-- Level 1 data cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_DCM" />
+	<!-- Level 1 instruction cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_ICM" />
+	<!-- Level 1 load misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_LDM" />
+	<!-- Level 1 store misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_STM" />
+	<!-- Level 1 cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L1_TCM" />
+	<!-- Level 2 data cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_DCA" />
+	<!-- Level 2 data cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_DCM" />
+	<!-- Level 2 data cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_DCR" />
+	<!-- Level 2 data cache writes -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_DCW" />
+	<!-- Level 2 instruction cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_ICA" />
+	<!-- Level 2 instruction cache hits -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_ICH" />
+	<!-- Level 2 instruction cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_ICM" />
+	<!-- Level 2 instruction cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_ICR" />
+	<!-- Level 2 load misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_LDM" />
+	<!-- Level 2 store misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_STM" />
+	<!-- Level 2 total cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_TCA" />
+	<!-- Level 2 cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_TCM" />
+	<!-- Level 2 total cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_TCR" />
+	<!-- Level 2 total cache writes -->
+	<ps_hwpc_event type="preset" name="PAPI_L2_TCW" />
+	<!-- Level 3 data cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_DCA" />
+	<!-- Level 3 data cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_DCR" />
+	<!-- Level 3 data cache writes -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_DCW" />
+	<!-- Level 3 instruction cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_ICA" />
+	<!-- Level 3 instruction cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_ICR" />
+	<!-- Level 3 load misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_LDM" />
+	<!-- Level 3 total cache accesses -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_TCA" />
+	<!-- Level 3 cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_TCM" />
+	<!-- Level 3 total cache reads -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_TCR" />
+	<!-- Level 3 total cache writes -->
+	<ps_hwpc_event type="preset" name="PAPI_L3_TCW" />
+	<!-- Load instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_LD_INS" />
+	<!-- Load/store instructions completed -->
+	<ps_hwpc_event type="preset" name="PAPI_LST_INS" />
+	<!-- Cycles Stalled Waiting for memory writes -->
+	<ps_hwpc_event type="preset" name="PAPI_MEM_WCY" />
+	<!-- Data prefetch cache misses -->
+	<ps_hwpc_event type="preset" name="PAPI_PRF_DM" />
+	<!-- Reference clock cycles -->
+	<ps_hwpc_event type="preset" name="PAPI_REF_CYC" />
+	<!-- Cycles stalled on any resource -->
+	<ps_hwpc_event type="preset" name="PAPI_RES_STL" />
+	<!-- Store instructions -->
+	<ps_hwpc_event type="preset" name="PAPI_SR_INS" />
+	<!-- Cycles with no instructions completed -->
+	<ps_hwpc_event type="preset" name="PAPI_STL_CCY" />
+	<!-- Cycles with no instruction issue -->
+	<ps_hwpc_event type="preset" name="PAPI_STL_ICY" />
+	<!-- Data translation lookaside buffer misses -->
+	<ps_hwpc_event type="preset" name="PAPI_TLB_DM" />
+	<!-- Instruction translation lookaside buffer misses -->
+	<ps_hwpc_event type="preset" name="PAPI_TLB_IM" />
+	<!-- Total cycles -->
+	<ps_hwpc_event type="preset" name="PAPI_TOT_CYC" />
+	<!-- Instructions completed -->
+	<ps_hwpc_event type="preset" name="PAPI_TOT_INS" />
+</ps_hwpc_eventlist>
diff '--exclude=*~' '--exclude=*cache*' '--exclude=*in' -urN perfsuite-1.1.4/src/libpshwpc/arch-defaults/PAPIStdEvents.xml perfsuite-1.1.4-tom/src/libpshwpc/arch-defaults/PAPIStdEvents.xml
--- perfsuite-1.1.4/src/libpshwpc/arch-defaults/PAPIStdEvents.xml	2004-03-10 04:01:01.000000000 +0100
+++ perfsuite-1.1.4-tom/src/libpshwpc/arch-defaults/PAPIStdEvents.xml	2015-04-11 22:39:51.699458551 +0200
@@ -321,4 +321,10 @@
 	<PAPIevent name="PAPI_VEC_INS">
 		<description>Vector/SIMD instructions</description>
 	</PAPIevent>
+	<PAPIevent name="PAPI_VEC_SP">
+            <description>Single precision vector/SIMD instructions</description>
+	</PAPIevent>
+	<PAPIevent name="PAPI_VEC_DP">
+            <description>Double precision vector/SIMD instructions</description>
+	</PAPIevent>
 </PAPIstdevents>
diff '--exclude=*~' '--exclude=*cache*' '--exclude=*in' -urN perfsuite-1.1.4/src/libpshwpc/dyn-conf.c perfsuite-1.1.4-tom/src/libpshwpc/dyn-conf.c
--- perfsuite-1.1.4/src/libpshwpc/dyn-conf.c	2013-04-30 18:34:06.000000000 +0200
+++ perfsuite-1.1.4-tom/src/libpshwpc/dyn-conf.c	2015-04-27 15:25:04.997072376 +0200
@@ -126,7 +126,10 @@
                     case 45:
                         PS_HWPC_DEF_CONFIGFILE = "papi_sandybridge.xml";
                         break;
-                    }
+                    case 63:
+                        PS_HWPC_DEF_CONFIGFILE = "papi_haswell.xml";
+                        break;
+                     }
                 }
                 break;
             case 15:
diff '--exclude=*~' '--exclude=*cache*' '--exclude=*in' -urN perfsuite-1.1.4/src/tcllib/pshwpc/papi/msgs/TEMPLATE perfsuite-1.1.4-tom/src/tcllib/pshwpc/papi/msgs/TEMPLATE
--- perfsuite-1.1.4/src/tcllib/pshwpc/papi/msgs/TEMPLATE	2003-12-31 06:07:55.000000000 +0100
+++ perfsuite-1.1.4-tom/src/tcllib/pshwpc/papi/msgs/TEMPLATE	2015-04-11 22:55:51.543421333 +0200
@@ -137,4 +137,6 @@
     PAPI_TOT_IIS "Instructions issued" \
     PAPI_TOT_INS "Instructions completed" \
     PAPI_VEC_INS "Vector/SIMD instructions" \
+    PAPI_VEC_SP  "Single precision vector/SIMD instructions" \
+    PAPI_VEC_DP  "Double precision vector/SIMD instructions" \
 ]
diff '--exclude=*~' '--exclude=*cache*' '--exclude=*in' -urN perfsuite-1.1.4/src/tcllib/pshwpc/papi/papiStdEvents.tcl perfsuite-1.1.4-tom/src/tcllib/pshwpc/papi/papiStdEvents.tcl
--- perfsuite-1.1.4/src/tcllib/pshwpc/papi/papiStdEvents.tcl	2004-07-25 17:40:52.000000000 +0200
+++ perfsuite-1.1.4-tom/src/tcllib/pshwpc/papi/papiStdEvents.tcl	2015-04-11 22:55:03.103821491 +0200
@@ -92,6 +92,8 @@
     PAPI_TOT_IIS {{} {Instructions issued} {} unavailable {} {}} \
     PAPI_L2_TCH {{} {Level 2 total cache hits} {} unavailable {} {}} \
     PAPI_VEC_INS {{} {Vector/SIMD instructions} {} unavailable {} {}} \
+    PAPI_VEC_SP {{} {Single precision Vector/SIMD instructions} {} unavailable {} {}} \
+    PAPI_VEC_DP {{} {Double precision Vector/SIMD instructions} {} unavailable {} {}} \
     PAPI_TLB_IM {{} {Instruction translation lookaside buffer misses} {} unavailable {} {}} \
     PAPI_BR_PRC {{} {Conditional branch instructions correctly predicted} {} unavailable {} {}} \
     PAPI_L2_ICH {{} {Level 2 instruction cache hits} {} unavailable {} {}} \
diff '--exclude=*~' '--exclude=*cache*' '--exclude=*in' -urN perfsuite-1.1.4/tools/psprocess/data/PAPI_metrics.xml perfsuite-1.1.4-tom/tools/psprocess/data/PAPI_metrics.xml
--- perfsuite-1.1.4/tools/psprocess/data/PAPI_metrics.xml	2012-05-09 22:22:33.000000000 +0200
+++ perfsuite-1.1.4-tom/tools/psprocess/data/PAPI_metrics.xml	2015-04-11 22:53:43.484480397 +0200
@@ -55,6 +55,32 @@
     </metric>
     
     <metric namespace="PAPI" type="ratio">
+        <name>PS_RATIO_SPVECINS_CYC</name>
+        <description lang="en_US">Single precision vector instructions per cycle</description>
+        <definition>
+            <apply>
+                <divide>
+                    <ci>PAPI_VEC_SP</ci>
+                    <ci>PAPI_TOT_CYC</ci>
+                </divide>
+            </apply>
+        </definition>
+    </metric>
+     
+    <metric namespace="PAPI" type="ratio">
+        <name>PS_RATIO_DPVECINS_CYC</name>
+        <description lang="en_US">Double precision vector instructions per cycle</description>
+        <definition>
+            <apply>
+                <divide>
+                    <ci>PAPI_VEC_DP</ci>
+                    <ci>PAPI_TOT_CYC</ci>
+                </divide>
+            </apply>
+        </definition>
+    </metric>
+     
+    <metric namespace="PAPI" type="ratio">
         <name>PS_RATIO_GFPINS_GINS</name>
         <description lang="en_US">Floating point instructions per graduated instruction</description>
         <description lang="es">Instrucciones de la coma flotante por la instruccion graduada</description>
@@ -84,6 +110,34 @@
     </metric>
    
     <metric namespace="PAPI" type="ratio">
+        <name>PS_RATIO_SPVECINS_GINS</name>
+        <description lang="en_US">Single precision vector instructions per graduated instruction</description>
+        <definition>
+            <apply>
+                <divide>
+                    <ci>PAPI_VEC_SP</ci>
+                    <ci>PAPI_TOT_INS</ci>
+                </divide>
+            </apply>
+        </definition>
+    </metric>
+    
+    <metric namespace="PAPI" type="ratio">
+        <name>PS_RATIO_DPVECINS_GINS</name>
+        <description lang="en_US">Double precision vector instructions per graduated instruction</description>
+        <description lang="es">Instrucciones del vector por la instruccion graduada</description>
+        <description lang="it">Istruzioni di vettore per istruzione graduata</description>
+        <definition>
+            <apply>
+                <divide>
+                    <ci>PAPI_VEC_DP</ci>
+                    <ci>PAPI_TOT_INS</ci>
+                </divide>
+            </apply>
+        </definition>
+    </metric>
+    
+    <metric namespace="PAPI" type="ratio">
         <name>PS_RATIO_VECINS_GINS</name>
         <description lang="en_US">Vector instructions per graduated instruction</description>
         <description lang="es">Instrucciones del vector por la instruccion graduada</description>
@@ -943,6 +997,38 @@
                     </divide>
                     <cn>1000000.0</cn>
                 </divide>
+            </apply>
+        </definition>
+    </metric>
+
+    <metric namespace="PAPI" type="mps">
+        <name>PS_MSPVOPS_CPU</name>
+        <description lang="en_US">MSPVOPS (cycles)</description>
+        <definition>
+            <apply>
+                <divide>
+                    <divide>
+                        <ci>PAPI_VEC_SP</ci>
+                        <ci>cpusecs</ci>
+                    </divide>
+                    <cn>1000000.0</cn>
+                </divide>
+            </apply>
+        </definition>
+    </metric>
+
+    <metric namespace="PAPI" type="mps">
+        <name>PS_MDPVOPS_CPU</name>
+        <description lang="en_US">MDPVOPS (cycles)</description>
+        <definition>
+            <apply>
+                <divide>
+                    <divide>
+                        <ci>PAPI_VEC_DP</ci>
+                        <ci>cpusecs</ci>
+                    </divide>
+                    <cn>1000000.0</cn>
+                </divide>
             </apply>
         </definition>
     </metric>
diff '--exclude=*~' '--exclude=*cache*' '--exclude=*in' -urN perfsuite-1.1.4/tools/psrun/environment.h perfsuite-1.1.4-tom/tools/psrun/environment.h
--- perfsuite-1.1.4/tools/psrun/environment.h	2010-08-23 21:48:24.000000000 +0200
+++ perfsuite-1.1.4-tom/tools/psrun/environment.h	2015-04-10 23:30:01.418316501 +0200
@@ -108,8 +108,12 @@
 /*
  * Startup object files - non-threaded and threaded
  */
+#ifndef PSRUN_PRELOAD_OBJ
 #define PSRUN_PRELOAD_OBJ         "libpsrun.so.0"
+#endif
+#ifndef PSRUN_PRELOAD_PTHREAD_OBJ
 #define PSRUN_PRELOAD_PTHREAD_OBJ "libpsrun_r.so.0"
+#endif
 
 /*
  * PerfSuite hardware performance counter shared library
